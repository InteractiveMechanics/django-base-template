{% extends "_layouts/base.html" %}
{% load staticfiles %}
{% load base_tags %}

<!-- Metadata -->
{% block page_title %}Home{% endblock %}
<!-- End Metadata -->
{% block body_class %}container{% endblock %}
{% block home_active %}active{% endblock %} <!-- Selects Home tab in Header Menu -->

{% block content %}

  <div class="row">
    <div class="col-md-6">
      <!-- Featured Image Carousel -->
      <div id="slider" class="carousel slide" data-ride="carousel">
        <div class="carousel-buttons">
          <div class="btn-group">
            <button href="#slider" data-slide="prev" class="btn btn-default">
              <span class="glyphicon glyphicon-chevron-left"></span>
            </button>
            <button id="play-button" type="button" class="btn btn-default">
              <span class="glyphicon glyphicon-play"></span>
            </button>
            <button id="pause-button" type="button" class="btn btn-default">
              <span class="glyphicon glyphicon-pause"></span>
            </button>
            <button href="#slider" data-slide="next" class="btn btn-default">
              <span class="glyphicon glyphicon-chevron-right"></span>
            </button>
          </div>          
        </div>        
        <div class="carousel-inner">
          {% for img in featured_imgs %}
            <div class="item {% if forloop.counter0 = 0 %}active{% endif %}">
              <div class="center-cropped" style="background-image: url('{{ img.uri }}');">
                <img src="{{ img.uri }}" alt="{% if img.description %}{{ img.description }}{% else %}No description for this image{% endif %}">
              </div>
              <div class="carousel-info-button">
                <button rel="popover" type="button" class="btn btn-default" data-container="body" data-toggle="popover" data-placement="right" data-trigger="hover" data-content="{% if img.description %}{{ img.description }}{% else %}No description for this image{% endif %}">
                  <span class="glyphicon glyphicon-info-sign"></span>
                </button>
              </div>
            </div>
          {% empty %}
            <div class="item active">
              <img src="{% static 'img/featured_img_example.jpg' %}" alt="Please select a featured image from the admin portal.">
            </div>
          {% endfor %}
        </div>
      </div> <!-- End Featured Image Carousel -->
      
      <!-- Sitewide Search Box -->
      <div class="general-search-box">
        <h2>Search the Database</h2>
        <form action="/search" method="get" class="form-inline" role="form">
          <div class="form-group full-width-form">
            <label class="sr-only" for="general_search">Search</label>
            <input type="text" name="q" class="form-control" id="general_search" placeholder="Enter search terms">
          </div>
        </form>
      </div> <!-- End Sitewide Search Box -->
      
    </div>
    
    <!-- Search Banners -->
    <div class="col-md-6" id="banner-buttons">
      <a href="/search/?q=&models=base.media">
        <div class="row banner media-banner">
          <h1>Explore the Archive</h1>
          <h4><i>Search images, letters, records, and more...</i></h4>
        </div>
      </a>
      <div class="row banner location-banner"> 
        <a href="{% url 'map' %}">
          <h1 style="text-align:right">Search the Map</h1>
          <h4 style="text-align:right"><i>Explore the interactive map...</i></h4>
        </a>
      </div>
      <div class="row banner people-banner">
        <a href="/search/?q=&models=base.personorg">
          <h1>Meet the People</h1>
          <h4><i>Discover the project's key figures...</i></h4>
        </a>
      </div>      
    </div><!-- End Search Banners -->
  </div>

{% endblock %}

<!-- Homepage Unique JS -->
{% block js %}

  <script>
    $(document).ready(function() {
      $("[rel='popover']").popover();
    });
    
    $('#play-button').click(function () {
      $('#slider').carousel('cycle');
    });
    
    $('#pause-button').click(function () {
      $('#slider').carousel('pause');
    });
  </script>

{% endblock %}
<!-- End Homepage Unique JS -->
